<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <span id="click">click Me</span>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.1.4/sockjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
    <script>
            let stompClient = null;
    let id="2";
    console.log()
const socket = new SockJS('http://localhost:8080/messenger');
        stompClient = Stomp.over(socket);

        stompClient.connect({}, onConnected, onError);
        function onConnected() {
 stompClient.subscribe('/user/'+id+'/topic/messages',onMessageReceived)

}
function onMessageReceived(payload){

}
function sendMessage(content){
    const message = {
        "content": content,
         "time": new Date() ,
            "senderId": id,
            "recipientId":1
        };

        stompClient.send("/app/chat", {}, JSON.stringify(message));
}
function onError(){
    console.log("error")
}
let click=document.getElementById("click")
click.addEventListener("click",(e)=>{
    //console.log("hi")
    sendMessage("hello");
})
    </script>
</body>
</html>